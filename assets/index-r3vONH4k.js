import{d as U,r as K,c as w,o as r,w as n,a as y,b as P,e as Q,t as b,f as g,g as o,E as W,h as V,u as X,i as M,j as I,_ as N,k as t,l as Y,m as Z,n as ee,F as h,p as ae,q as le,s as ne,v as oe,x as E,y as te,z as se,A as ue,B as ie}from"./index-DcHNggEW.js";const re={class:"header"},me=U({__name:"index",props:{img_info:{},displayImg:{type:Boolean},base_url:{},show_img:{type:Function}},setup(S){function _(l){l&&navigator.clipboard.writeText(l).then(()=>{I.success("已复制到剪切板")}).catch(()=>{I.error("复制失败，请手动复制")})}return(l,u)=>{const p=W,m=K("lazy");return r(),w(X(M),null,{footer:n(()=>[o(p,{onClick:u[1]||(u[1]=i=>_(l.img_info.tag))},{default:n(()=>[V(b(l.img_info.tag),1)]),_:1})]),default:n(()=>[y("div",re,b(l.img_info.name),1),l.displayImg?P((r(),g("img",{key:0,style:{width:"100%"},onClick:u[0]||(u[0]=i=>l.show_img(l.img_info))},null,512)),[[m,l.base_url+l.img_info.img_url]]):Q("",!0)]),_:1})}}}),de=N(me,[["__scopeId","data-v-85b72eb3"]]),_e={class:"my-2 ml-4 group"},pe={class:"my-2 ml-4 group"},ve=["src"],k="https://huggingface.co/datasets/pleb631/prompt/resolve/main/",ge=U({__name:"index",setup(S){const _=t(4),l=t(!0),u=t({}),p=t([]),m=t(""),i=t({name:"",groups:[]}),v=t([]),d=t(""),c=t({name:"",tags:[]}),f=t(!1);function j(s){m.value=s,i.value=u.value.find(e=>e.name===s),v.value=i.value.groups.map(e=>e.name),d.value=v.value[0],c.value=i.value.groups.find(e=>e.name===d.value)}function z(s){d.value=s,c.value=i.value.groups.find(e=>e.name===s)}Y(async()=>{const s=await fetch(`${k}prompt_tags.json`);u.value=await s.json(),p.value=u.value.map(e=>e.name),m.value=p.value[0],i.value=u.value.find(e=>e.name===m.value),v.value=i.value.groups.map(e=>e.name),d.value=v.value[0],c.value=i.value.groups.find(e=>e.name===d.value)});const B=t({img_url:"",name:"",tag:""});function F(s){B.value=s,f.value=!0}function G(){f.value=!1}return(s,e)=>{const R=le,T=ne,A=te,q=oe,x=M,L=ae,$=ie,D=ue,O=se,H=Z,J=ee;return r(),g(h,null,[o(H,null,{default:n(()=>[o(L,{class:"main"},{default:n(()=>[o(x,{style:{width:"100%",height:"100%"}},{default:n(()=>[o(R,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value=a),"active-text":"Open","inactive-text":"Close"},null,8,["modelValue"]),o(T,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=a=>_.value=a),min:1,max:6,step:1,"show-input":"",style:{width:"300px","margin-bottom":"20px"}},null,8,["modelValue"]),o(q,{gutter:20},{default:n(()=>[(r(!0),g(h,null,E(c.value.tags,(a,C)=>(r(),w(A,{span:Math.ceil(24/_.value),key:C},{default:n(()=>[o(de,{img_info:a,base_url:k+"small/","display-img":l.value,show_img:F},null,8,["img_info","base_url","display-img"])]),_:2},1032,["span"]))),128))]),_:1})]),_:1})]),_:1}),o(O,{class:"right"},{default:n(()=>[e[5]||(e[5]=V(" >")),o(x,{style:{width:"100%",height:"100%"}},{default:n(()=>[y("div",_e,[o(D,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=a=>m.value=a)},{default:n(()=>[(r(!0),g(h,null,E(p.value,a=>(r(),w($,{key:a,value:a,onChange:C=>j(a)},{default:n(()=>[V(b(a),1)]),_:2},1032,["value","onChange"]))),128))]),_:1},8,["modelValue"])]),y("div",pe,[o(D,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=a=>d.value=a)},{default:n(()=>[(r(!0),g(h,null,E(v.value,a=>(r(),w($,{key:a,value:a,onChange:C=>z(a)},{default:n(()=>[V(b(a),1)]),_:2},1032,["value","onChange"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1,__:[5]})]),_:1}),o(J,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=a=>f.value=a),title:"imgViewer",onClosed:G},{default:n(()=>[y("img",{src:k+"regular/"+B.value.img_url+"?t="+Date.now(),style:{width:"100%"}},null,8,ve)]),_:1},8,["modelValue"])],64)}}}),fe=N(ge,[["__scopeId","data-v-e72ddc5a"]]);export{fe as default};
