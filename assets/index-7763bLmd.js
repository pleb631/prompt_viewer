import{d as S,r as O,c as V,o as u,w as t,a as _,b as P,e as Q,t as b,f,g as s,E as X,h as $,u as B,i as j,j as x,_ as z,k as n,l as R,m as Y,n as Z,F as y,p as ee,q as k,s as ae,v as le,x as oe,y as ne,z as te}from"./index-xT0VXPk3.js";const se={class:"header"},ue=S({__name:"index",props:{img_info:{},displayImg:{type:Boolean},base_url:{},show_img:{type:Function}},setup(F){function C(l){l&&navigator.clipboard.writeText(l).then(()=>{x.success("已复制到剪切板")}).catch(()=>{x.error("复制失败，请手动复制")})}return(l,i)=>{const d=X,p=O("lazy");return u(),V(B(j),null,{footer:t(()=>[s(d,{class:"btn",onClick:i[1]||(i[1]=v=>C(l.img_info.tag)),title:l.img_info.tag},{default:t(()=>[$(b(l.img_info.tag),1)]),_:1},8,["title"])]),default:t(()=>[_("div",se,b(l.img_info.name),1),l.displayImg&&l.img_info.img_url?P((u(),f("img",{key:0,style:{width:"100%"},onClick:i[0]||(i[0]=v=>l.show_img(l.img_info))},null,512)),[[p,l.base_url+l.img_info.img_url]]):Q("",!0)]),_:1})}}}),ie=z(ue,[["__scopeId","data-v-d9da73b2"]]),re={class:"responsive-layout"},me={class:"my-2 group"},de={class:"my-2 group"},_e=["src"],pe=S({__name:"index",setup(F){const C=Y(),l=n(4),i=n(!1),d=n({}),p="https://huggingface.co/datasets/pleb631/prompt/resolve/main/",v=n([]),g=n(""),r=n({name:"",groups:[]}),c=n([]),m=n(""),h=n({name:"",tags:[]}),w=n(!1);function G(a){g.value=a,r.value=d.value.find(o=>o.name===a),c.value=r.value.groups.map(o=>o.name),m.value=c.value[0],h.value=r.value.groups.find(o=>o.name===m.value)}function T(a){m.value=a,h.value=r.value.groups.find(o=>o.name===a)}R(async()=>{try{const a=await fetch(`${p}prompt_tags.json`);d.value=await a.json()}catch{x.error("下载数据失败，请稍后重试"),C.push({path:"/404"})}v.value=d.value.map(a=>a.name),g.value=v.value[0],r.value=d.value.find(a=>a.name===g.value),c.value=r.value.groups.map(a=>a.name),m.value=c.value[0],h.value=r.value.groups.find(a=>a.name===m.value)});const M=n({img_url:"",name:"",tag:""});function q(a){M.value=a,w.value=!0}function L(){w.value=!1}const D=n(!1);return R(()=>{D.value=window.innerWidth<=768}),(a,o)=>{const I=ae,U=ee,N=j,W=le,A=oe,H=te,J=ne,K=Z;return u(),f(y,null,[_("div",re,[s(N,{class:"aside-card"},{default:t(()=>[_("div",me,[s(U,{modelValue:g.value,"onUpdate:modelValue":o[0]||(o[0]=e=>g.value=e)},{default:t(()=>[(u(!0),f(y,null,k(v.value,e=>(u(),V(I,{key:e,value:e,onChange:E=>G(e)},{default:t(()=>[$(b(e),1)]),_:2},1032,["value","onChange"]))),128))]),_:1},8,["modelValue"])]),_("div",de,[s(U,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=e=>m.value=e)},{default:t(()=>[(u(!0),f(y,null,k(c.value,e=>(u(),V(I,{key:e,value:e,onChange:E=>T(e)},{default:t(()=>[$(b(e),1)]),_:2},1032,["value","onChange"]))),128))]),_:1},8,["modelValue"])])]),_:1}),s(N,{class:"main-card"},{default:t(()=>[_("div",null,[s(W,{modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=e=>i.value=e),"active-text":"查看图片"},null,8,["modelValue"]),s(A,{class:"toolbar",modelValue:l.value,"onUpdate:modelValue":o[3]||(o[3]=e=>l.value=e),min:1,max:6,step:1,"show-input":"",style:{"max-width":"300px",margin:"10px 0"}},null,8,["modelValue"])]),s(J,{gutter:20},{default:t(()=>[(u(!0),f(y,null,k(h.value.tags,(e,E)=>(u(),V(H,{key:E,xs:24,sm:Math.min(24,Math.ceil(24/l.value)),md:Math.ceil(24/l.value)},{default:t(()=>[s(ie,{img_info:e,base_url:B(p)+"small/","display-img":i.value,show_img:q},null,8,["img_info","base_url","display-img"])]),_:2},1032,["sm","md"]))),128))]),_:1})]),_:1})]),s(K,{modelValue:w.value,"onUpdate:modelValue":o[4]||(o[4]=e=>w.value=e),title:"高清预览",onClosed:L,width:D.value?"95%":""},{default:t(()=>[_("img",{src:B(p)+"regular/"+M.value.img_url+"?t="+Date.now(),style:{width:"100%"}},null,8,_e)]),_:1},8,["modelValue","width"])],64)}}}),ge=z(pe,[["__scopeId","data-v-8dc487ae"]]);export{ge as default};
