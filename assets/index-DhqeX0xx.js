import{d as R,r as K,c as V,o as i,w as s,a as _,b as O,e as Q,t as C,f,g as u,E as X,h as $,u as B,i as S,j as y,_ as j,k as t,l as N,m as Y,n as Z,F as w,p as ee,q as x,s as ae,v as le,x as oe,y as ne,z as te}from"./index-BoEtR2-5.js";const se={class:"header"},ue=R({__name:"index",props:{img_info:{},displayImg:{type:Boolean},base_url:{},show_img:{type:Function}},setup(z){function k(e){e&&(navigator.clipboard&&typeof navigator.clipboard.writeText=="function"?navigator.clipboard.writeText(e).then(()=>{y.success("已复制到剪切板")}).catch(l=>{console.error("clipboard.writeText 失败:",l),d(e)}):(console.warn("clipboard API 不可用，使用 fallback"),d(e)))}function d(e){const l=document.createElement("textarea");l.value=e,l.style.position="fixed",l.style.opacity="0",document.body.appendChild(l),l.focus(),l.select();try{document.execCommand("copy")?y.success("已复制到剪切板"):y.error("复制失败，请手动复制")}catch(r){console.error("fallback 复制失败:",r),y.error("复制失败，请手动复制")}document.body.removeChild(l)}return(e,l)=>{const r=X,v=K("lazy");return i(),V(B(S),null,{footer:s(()=>[u(r,{class:"btn",onClick:l[1]||(l[1]=m=>k(e.img_info.tag)),title:e.img_info.tag},{default:s(()=>[$(C(e.img_info.tag),1)]),_:1},8,["title"])]),default:s(()=>[_("div",se,C(e.img_info.name),1),e.displayImg&&e.img_info.img_url?O((i(),f("img",{key:0,style:{width:"100%"},onClick:l[0]||(l[0]=m=>e.show_img(e.img_info))},null,512)),[[v,e.base_url+e.img_info.img_url]]):Q("",!0)]),_:1})}}}),ie=j(ue,[["__scopeId","data-v-28b88c3c"]]),re={class:"responsive-layout"},de={class:"my-2 group"},me={class:"my-2 group"},ce=["src"],pe=R({__name:"index",setup(z){const k=Y(),d=t(4),e=t(!1),l=t({}),r="https://huggingface.co/datasets/pleb631/prompt/resolve/main/",v=t([]),m=t(""),c=t({name:"",groups:[]}),g=t([]),p=t(""),h=t({name:"",tags:[]}),b=t(!1);function F(o){m.value=o,c.value=l.value.find(n=>n.name===o),g.value=c.value.groups.map(n=>n.name),p.value=g.value[0],h.value=c.value.groups.find(n=>n.name===p.value)}function G(o){p.value=o,h.value=c.value.groups.find(n=>n.name===o)}N(async()=>{try{const o=await fetch(`${r}prompt_tags.json`);l.value=await o.json()}catch{y.error("下载数据失败，请稍后重试"),k.push({path:"/404"})}v.value=l.value.map(o=>o.name),m.value=v.value[0],c.value=l.value.find(o=>o.name===m.value),g.value=c.value.groups.map(o=>o.name),p.value=g.value[0],h.value=c.value.groups.find(o=>o.name===p.value)});const I=t({img_url:"",name:"",tag:""});function q(o){I.value=o,b.value=!0}function A(){b.value=!1}const M=t(!1);return N(()=>{M.value=window.innerWidth<=768}),(o,n)=>{const T=ae,D=ee,U=S,L=le,P=oe,W=te,H=ne,J=Z;return i(),f(w,null,[_("div",re,[u(U,{class:"aside-card"},{default:s(()=>[_("div",de,[u(D,{modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=a=>m.value=a)},{default:s(()=>[(i(!0),f(w,null,x(v.value,a=>(i(),V(T,{key:a,value:a,onChange:E=>F(a)},{default:s(()=>[$(C(a),1)]),_:2},1032,["value","onChange"]))),128))]),_:1},8,["modelValue"])]),_("div",me,[u(D,{modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=a=>p.value=a)},{default:s(()=>[(i(!0),f(w,null,x(g.value,a=>(i(),V(T,{key:a,value:a,onChange:E=>G(a)},{default:s(()=>[$(C(a),1)]),_:2},1032,["value","onChange"]))),128))]),_:1},8,["modelValue"])])]),_:1}),u(U,{class:"main-card"},{default:s(()=>[_("div",null,[u(L,{modelValue:e.value,"onUpdate:modelValue":n[2]||(n[2]=a=>e.value=a),"active-text":"查看图片"},null,8,["modelValue"]),u(P,{class:"toolbar",modelValue:d.value,"onUpdate:modelValue":n[3]||(n[3]=a=>d.value=a),min:1,max:6,step:1,"show-input":"",style:{"max-width":"300px",margin:"10px 0"}},null,8,["modelValue"])]),u(H,{gutter:20},{default:s(()=>[(i(!0),f(w,null,x(h.value.tags,(a,E)=>(i(),V(W,{key:E,xs:24,sm:Math.min(24,Math.ceil(24/d.value)),md:Math.ceil(24/d.value)},{default:s(()=>[u(ie,{img_info:a,base_url:B(r)+"small/","display-img":e.value,show_img:q},null,8,["img_info","base_url","display-img"])]),_:2},1032,["sm","md"]))),128))]),_:1})]),_:1})]),u(J,{modelValue:b.value,"onUpdate:modelValue":n[4]||(n[4]=a=>b.value=a),title:"高清预览",onClosed:A,width:M.value?"95%":""},{default:s(()=>[_("img",{src:B(r)+"regular/"+I.value.img_url+"?t="+Date.now(),style:{width:"100%"}},null,8,ce)]),_:1},8,["modelValue","width"])],64)}}}),ve=j(pe,[["__scopeId","data-v-8dc487ae"]]);export{ve as default};
