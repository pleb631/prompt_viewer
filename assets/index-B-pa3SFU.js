import{d as R,r as K,c as y,o as u,w as t,a as p,b as O,e as P,t as b,f as c,g as s,E as Q,h as $,u as X,i as S,j as B,_ as j,k as n,l as N,m as Y,n as Z,F as w,p as ee,q as E,s as ae,v as le,x as oe,y as ne,z as te}from"./index-CHTKnizO.js";const se={class:"header"},ue=R({__name:"index",props:{img_info:{},displayImg:{type:Boolean},base_url:{},show_img:{type:Function}},setup(z){function V(l){l&&navigator.clipboard.writeText(l).then(()=>{B.success("已复制到剪切板")}).catch(()=>{B.error("复制失败，请手动复制")})}return(l,i)=>{const _=Q,v=K("lazy");return u(),y(X(S),null,{footer:t(()=>[s(_,{class:"btn",onClick:i[1]||(i[1]=r=>V(l.img_info.tag)),title:l.img_info.tag},{default:t(()=>[$(b(l.img_info.tag),1)]),_:1},8,["title"])]),default:t(()=>[p("div",se,b(l.img_info.name),1),l.displayImg&&l.img_info.img_url?O((u(),c("img",{key:0,style:{width:"100%"},onClick:i[0]||(i[0]=r=>l.show_img(l.img_info))},null,512)),[[v,l.base_url+l.img_info.img_url]]):P("",!0)]),_:1})}}}),ie=j(ue,[["__scopeId","data-v-d9da73b2"]]),re={class:"responsive-layout"},de={class:"my-2 group"},me={class:"my-2 group"},_e=["src"],k="https://huggingface.co/datasets/pleb631/prompt/resolve/main/",pe=R({__name:"index",setup(z){const V=Y(),l=n(4),i=n(!1),_=n({}),v=n([]),r=n(""),d=n({name:"",groups:[]}),g=n([]),m=n(""),f=n({name:"",tags:[]}),h=n(!1);function F(a){r.value=a,d.value=_.value.find(o=>o.name===a),g.value=d.value.groups.map(o=>o.name),m.value=g.value[0],f.value=d.value.groups.find(o=>o.name===m.value)}function G(a){m.value=a,f.value=d.value.groups.find(o=>o.name===a)}N(async()=>{try{const a=await fetch(`${k}prompt_tags.json`);_.value=await a.json()}catch{B.error("下载数据失败，请稍后重试"),V.push({path:"/404"})}v.value=_.value.map(a=>a.name),r.value=v.value[0],d.value=_.value.find(a=>a.name===r.value),g.value=d.value.groups.map(a=>a.name),m.value=g.value[0],f.value=d.value.groups.find(a=>a.name===m.value)});const x=n({img_url:"",name:"",tag:""});function T(a){x.value=a,h.value=!0}function q(){h.value=!1}const M=n(!1);return N(()=>{M.value=window.innerWidth<=768}),(a,o)=>{const D=ae,I=ee,U=S,L=le,W=oe,A=te,H=ne,J=Z;return u(),c(w,null,[p("div",re,[s(U,{class:"aside-card"},{default:t(()=>[p("div",de,[s(I,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e)},{default:t(()=>[(u(!0),c(w,null,E(v.value,e=>(u(),y(D,{key:e,value:e,onChange:C=>F(e)},{default:t(()=>[$(b(e),1)]),_:2},1032,["value","onChange"]))),128))]),_:1},8,["modelValue"])]),p("div",me,[s(I,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=e=>m.value=e)},{default:t(()=>[(u(!0),c(w,null,E(g.value,e=>(u(),y(D,{key:e,value:e,onChange:C=>G(e)},{default:t(()=>[$(b(e),1)]),_:2},1032,["value","onChange"]))),128))]),_:1},8,["modelValue"])])]),_:1}),s(U,{class:"main-card"},{default:t(()=>[p("div",null,[s(L,{modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=e=>i.value=e),"active-text":"查看图片"},null,8,["modelValue"]),s(W,{class:"toolbar",modelValue:l.value,"onUpdate:modelValue":o[3]||(o[3]=e=>l.value=e),min:1,max:6,step:1,"show-input":"",style:{"max-width":"300px",margin:"10px 0"}},null,8,["modelValue"])]),s(H,{gutter:20},{default:t(()=>[(u(!0),c(w,null,E(f.value.tags,(e,C)=>(u(),y(A,{key:C,xs:24,sm:Math.min(24,Math.ceil(24/l.value)),md:Math.ceil(24/l.value)},{default:t(()=>[s(ie,{img_info:e,base_url:k+"small/","display-img":i.value,show_img:T},null,8,["img_info","base_url","display-img"])]),_:2},1032,["sm","md"]))),128))]),_:1})]),_:1})]),s(J,{modelValue:h.value,"onUpdate:modelValue":o[4]||(o[4]=e=>h.value=e),title:"高清预览",onClosed:q,width:M.value?"95%":""},{default:t(()=>[p("img",{src:k+"regular/"+x.value.img_url+"?t="+Date.now(),style:{width:"100%"}},null,8,_e)]),_:1},8,["modelValue","width"])],64)}}}),ge=j(pe,[["__scopeId","data-v-0d0d7b75"]]);export{ge as default};
