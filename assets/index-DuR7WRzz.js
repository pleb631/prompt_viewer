import{d as U,r as J,c as w,o as u,w as n,a as p,b as K,e as O,t as V,f as c,g as s,E as P,h as $,u as Q,i as N,j as B,_ as R,k as t,l as W,m as X,n as Y,F as y,p as Z,q as E,s as ee,v as ae,x as le,y as oe,z as ne}from"./index-0ohjCO3g.js";const te={class:"header"},se=U({__name:"index",props:{img_info:{},displayImg:{type:Boolean},base_url:{},show_img:{type:Function}},setup(S){function b(l){l&&navigator.clipboard.writeText(l).then(()=>{B.success("已复制到剪切板")}).catch(()=>{B.error("复制失败，请手动复制")})}return(l,i)=>{const _=P,v=J("lazy");return u(),w(Q(N),null,{footer:n(()=>[s(_,{class:"btn",onClick:i[1]||(i[1]=r=>b(l.img_info.tag)),title:l.img_info.tag},{default:n(()=>[$(V(l.img_info.tag),1)]),_:1},8,["title"])]),default:n(()=>[p("div",te,V(l.img_info.name),1),l.displayImg&&l.img_info.img_url?K((u(),c("img",{key:0,style:{width:"100%"},onClick:i[0]||(i[0]=r=>l.show_img(l.img_info))},null,512)),[[v,l.base_url+l.img_info.img_url]]):O("",!0)]),_:1})}}}),ue=R(se,[["__scopeId","data-v-d9da73b2"]]),ie={class:"responsive-layout"},re={class:"my-2 group"},me={class:"my-2 group"},de=["src"],k="https://huggingface.co/datasets/pleb631/prompt/resolve/main/",_e=U({__name:"index",setup(S){const b=X(),l=t(4),i=t(!1),_=t({}),v=t([]),r=t(""),m=t({name:"",groups:[]}),g=t([]),d=t(""),f=t({name:"",tags:[]}),h=t(!1);function j(a){r.value=a,m.value=_.value.find(o=>o.name===a),g.value=m.value.groups.map(o=>o.name),d.value=g.value[0],f.value=m.value.groups.find(o=>o.name===d.value)}function z(a){d.value=a,f.value=m.value.groups.find(o=>o.name===a)}W(async()=>{try{const a=await fetch(`${k}prompt_tags.json`);_.value=await a.json()}catch{B.error("下载数据失败，请稍后重试"),b.push({path:"/404"})}v.value=_.value.map(a=>a.name),r.value=v.value[0],m.value=_.value.find(a=>a.name===r.value),g.value=m.value.groups.map(a=>a.name),d.value=g.value[0],f.value=m.value.groups.find(a=>a.name===d.value)});const x=t({img_url:"",name:"",tag:""});function F(a){x.value=a,h.value=!0}function G(){h.value=!1}return(a,o)=>{const D=ee,I=Z,M=N,T=ae,q=le,L=ne,A=oe,H=Y;return u(),c(y,null,[p("div",ie,[s(M,{class:"aside-card"},{default:n(()=>[p("div",re,[s(I,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e)},{default:n(()=>[(u(!0),c(y,null,E(v.value,e=>(u(),w(D,{key:e,value:e,onChange:C=>j(e)},{default:n(()=>[$(V(e),1)]),_:2},1032,["value","onChange"]))),128))]),_:1},8,["modelValue"])]),p("div",me,[s(I,{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=e=>d.value=e)},{default:n(()=>[(u(!0),c(y,null,E(g.value,e=>(u(),w(D,{key:e,value:e,onChange:C=>z(e)},{default:n(()=>[$(V(e),1)]),_:2},1032,["value","onChange"]))),128))]),_:1},8,["modelValue"])])]),_:1}),s(M,{class:"main-card"},{default:n(()=>[p("div",null,[s(T,{modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=e=>i.value=e),"active-text":"查看图片"},null,8,["modelValue"]),s(q,{class:"toolbar",modelValue:l.value,"onUpdate:modelValue":o[3]||(o[3]=e=>l.value=e),min:1,max:6,step:1,"show-input":"",style:{"max-width":"300px",margin:"10px 0"}},null,8,["modelValue"])]),s(A,{gutter:20},{default:n(()=>[(u(!0),c(y,null,E(f.value.tags,(e,C)=>(u(),w(L,{key:C,xs:24,sm:Math.min(24,Math.ceil(24/l.value)),md:Math.ceil(24/l.value)},{default:n(()=>[s(ue,{img_info:e,base_url:k+"small/","display-img":i.value,show_img:F},null,8,["img_info","base_url","display-img"])]),_:2},1032,["sm","md"]))),128))]),_:1})]),_:1})]),s(H,{modelValue:h.value,"onUpdate:modelValue":o[4]||(o[4]=e=>h.value=e),title:"高清预览",onClosed:G},{default:n(()=>[p("img",{src:k+"regular/"+x.value.img_url+"?t="+Date.now(),style:{width:"100%"}},null,8,de)]),_:1},8,["modelValue"])],64)}}}),ve=R(_e,[["__scopeId","data-v-3f1e7233"]]);export{ve as default};
